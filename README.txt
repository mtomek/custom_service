README.txt
==========

Задача: разработать модуль для приёма заявок
Описание процесса:
1. Анонимный пользователь заполняет форму по адресу /service/add
Поля формы (все – обязательные):
- ФИО [name]
- Мобильный телефон в РФ [phone]
- E-mail [mail]
- Город [city] (выпадающий список Москва / Минск / Киев)
- Скан свидетельства ИНН [file_inn] (JPEG/PNG)
2. Все поля формы валидируются, в т.ч. отсеиваются повторные заявки
3. После успешной валидации:
- вызывается хук mymodule_service_alter, которому в качестве параметра передаются данные (для их возможного изменения)
- в системе создаётся новый пользователь с указанным e-mail
- данные отправляются как POST-запрос на тестовый адрес с полями phone, name, mail и city (валидации)
- при успешной отправке вернётся ответ вида {"status":"success","uuid":"464d1819-f5cc-46cd-b96a-6fdf2c631bbe"} [данный response можно сымитировать]
- при неуспешной отправке вернётся ответ вида {"status":"error"}
4. После передачи данных:
- скан ИНН сжимается в ZIP
- все поля формы + статус с вызова выше + uuid (если он есть) + ссылка на ZIP сохраняются в БД
- вызывается хук mymodule_service_insert, которому в качестве параметра передаются данные
5. Суперпользователь может просматривать результаты по адресу /service/list:
- сортировка по created desc
- формат вывода – таблица
- фильтрация по диапазону дат и по городу
В таблице выводятся:
- дата
- ФИО
- телефон
- E-mail
- миниатюра скана ИНН
- ссылка на ZIP
- статус
- UUID
6. Технические требования:
- Drupal7
- минимум зависимостей

7. Результат

Готовый модуль в виде репозитория на github
